{"ast":null,"code":"import _regeneratorRuntime from\"/workspace/aws-bootcamp-cruddur-2023/frontend-react-js/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/workspace/aws-bootcamp-cruddur-2023/frontend-react-js/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/workspace/aws-bootcamp-cruddur-2023/frontend-react-js/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import'./ConfirmationPage.css';import React from\"react\";import{useParams}from'react-router-dom';import{ReactComponent as Logo}from'../components/svg/logo.svg';// [TODO] Authenication\nimport{Auth}from'aws-amplify';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function ConfirmationPage(){var _React$useState=React.useState(''),_React$useState2=_slicedToArray(_React$useState,2),email=_React$useState2[0],setEmail=_React$useState2[1];var _React$useState3=React.useState(''),_React$useState4=_slicedToArray(_React$useState3,2),code=_React$useState4[0],setCode=_React$useState4[1];var _React$useState5=React.useState(''),_React$useState6=_slicedToArray(_React$useState5,2),errors=_React$useState6[0],setErrors=_React$useState6[1];var _React$useState7=React.useState(false),_React$useState8=_slicedToArray(_React$useState7,2),codeSent=_React$useState8[0],setCodeSent=_React$useState8[1];var params=useParams();var code_onchange=function code_onchange(event){setCode(event.target.value);};var email_onchange=function email_onchange(event){setEmail(event.target.value);};var resend_code=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(event){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setErrors('');_context.prev=1;_context.next=4;return Auth.resendSignUp(email);case 4:console.log('code resent successfully');setCodeSent(true);_context.next=12;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](1);// does not return a code\n// does cognito always return english\n// for this to be an okay match?\nconsole.log(_context.t0);if(_context.t0.message=='Username cannot be empty'){setErrors(\"You need to provide an email in order to send Resend Activiation Code\");}else if(_context.t0.message==\"Username/client id combination not found.\"){setErrors(\"Email is invalid or cannot be found.\");}case 12:case\"end\":return _context.stop();}}},_callee,null,[[1,8]]);}));return function resend_code(_x){return _ref.apply(this,arguments);};}();var onsubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(event){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:event.preventDefault();setErrors('');_context2.prev=2;_context2.next=5;return Auth.confirmSignUp(email,code);case 5:window.location.href=\"/\";_context2.next=11;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](2);setErrors(_context2.t0.message);case 11:return _context2.abrupt(\"return\",false);case 12:case\"end\":return _context2.stop();}}},_callee2,null,[[2,8]]);}));return function onsubmit(_x2){return _ref2.apply(this,arguments);};}();var el_errors;if(errors){el_errors=/*#__PURE__*/_jsx(\"div\",{className:\"errors\",children:errors});}var code_button;if(codeSent){code_button=/*#__PURE__*/_jsx(\"div\",{className:\"sent-message\",children:\"A new activation code has been sent to your email\"});}else{code_button=/*#__PURE__*/_jsx(\"button\",{className:\"resend\",onClick:resend_code,children:\"Resend Activation Code\"});}React.useEffect(function(){if(params.email){setEmail(params.email);}},[]);return/*#__PURE__*/_jsxs(\"article\",{className:\"confirm-article\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"recover-info\",children:/*#__PURE__*/_jsx(Logo,{className:\"logo\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"recover-wrapper\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"confirm_form\",onSubmit:onsubmit,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Confirm your Email\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"fields\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"field text_field email\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:email,onChange:email_onchange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field text_field code\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Confirmation Code\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:code,onChange:code_onchange})]})]}),el_errors,/*#__PURE__*/_jsx(\"div\",{className:\"submit\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Confirm Email\"})})]})}),code_button]});}","map":{"version":3,"names":["React","useParams","ReactComponent","Logo","Auth","ConfirmationPage","useState","email","setEmail","code","setCode","errors","setErrors","codeSent","setCodeSent","params","code_onchange","event","target","value","email_onchange","resend_code","resendSignUp","console","log","message","onsubmit","preventDefault","confirmSignUp","window","location","href","el_errors","code_button","useEffect"],"sources":["/workspace/aws-bootcamp-cruddur-2023/frontend-react-js/src/pages/ConfirmationPage.js"],"sourcesContent":["import './ConfirmationPage.css';\nimport React from \"react\";\nimport { useParams } from 'react-router-dom';\nimport {ReactComponent as Logo} from '../components/svg/logo.svg';\n\n// [TODO] Authenication\nimport { Auth } from 'aws-amplify';\n\nexport default function ConfirmationPage() {\n  const [email, setEmail] = React.useState('');\n  const [code, setCode] = React.useState('');\n  const [errors, setErrors] = React.useState('');\n  const [codeSent, setCodeSent] = React.useState(false);\n\n  const params = useParams();\n\n  const code_onchange = (event) => {\n    setCode(event.target.value);\n  }\n  const email_onchange = (event) => {\n    setEmail(event.target.value);\n  }\n\n  const resend_code = async (event) => {\n    setErrors('')\n    try {\n      await Auth.resendSignUp(email);\n      console.log('code resent successfully');\n      setCodeSent(true)\n    } catch (err) {\n      // does not return a code\n      // does cognito always return english\n      // for this to be an okay match?\n      console.log(err)\n      if (err.message == 'Username cannot be empty'){\n        setErrors(\"You need to provide an email in order to send Resend Activiation Code\")   \n      } else if (err.message == \"Username/client id combination not found.\"){\n        setErrors(\"Email is invalid or cannot be found.\")   \n      }\n    }\n  }\n\n  const onsubmit = async (event) => {\n    event.preventDefault();\n    setErrors('')\n    try {\n      await Auth.confirmSignUp(email, code);\n      window.location.href = \"/\"\n    } catch (error) {\n      setErrors(error.message)\n    }\n    return false\n  }\n\n  let el_errors;\n  if (errors){\n    el_errors = <div className='errors'>{errors}</div>;\n  }\n\n\n  let code_button;\n  if (codeSent){\n    code_button = <div className=\"sent-message\">A new activation code has been sent to your email</div>\n  } else {\n    code_button = <button className=\"resend\" onClick={resend_code}>Resend Activation Code</button>;\n  }\n\n  React.useEffect(()=>{\n    if (params.email) {\n      setEmail(params.email)\n    }\n  }, [])\n\n  return (\n    <article className=\"confirm-article\">\n      <div className='recover-info'>\n        <Logo className='logo' />\n      </div>\n      <div className='recover-wrapper'>\n        <form\n          className='confirm_form'\n          onSubmit={onsubmit}\n        >\n          <h2>Confirm your Email</h2>\n          <div className='fields'>\n            <div className='field text_field email'>\n              <label>Email</label>\n              <input\n                type=\"text\"\n                value={email}\n                onChange={email_onchange} \n              />\n            </div>\n            <div className='field text_field code'>\n              <label>Confirmation Code</label>\n              <input\n                type=\"text\"\n                value={code}\n                onChange={code_onchange} \n              />\n            </div>\n          </div>\n          {el_errors}\n          <div className='submit'>\n            <button type='submit'>Confirm Email</button>\n          </div>\n        </form>\n      </div>\n      {code_button}\n    </article>\n  );\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}