{"ast":null,"code":"import _regeneratorRuntime from\"/workspace/aws-bootcamp-cruddur-2023/frontend-react-js/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/workspace/aws-bootcamp-cruddur-2023/frontend-react-js/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/workspace/aws-bootcamp-cruddur-2023/frontend-react-js/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import'./SigninPage.css';import React from\"react\";import{ReactComponent as Logo}from'../components/svg/logo.svg';import{Link}from\"react-router-dom\";// [TODO] Authenication\nimport{Auth}from'aws-amplify';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function SigninPage(){var _React$useState=React.useState(''),_React$useState2=_slicedToArray(_React$useState,2),email=_React$useState2[0],setEmail=_React$useState2[1];var _React$useState3=React.useState(''),_React$useState4=_slicedToArray(_React$useState3,2),password=_React$useState4[0],setPassword=_React$useState4[1];var _React$useState5=React.useState(''),_React$useState6=_slicedToArray(_React$useState5,2),errors=_React$useState6[0],setErrors=_React$useState6[1];var onsubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(event){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setErrors('');event.preventDefault();Auth.signIn(email,password).then(function(user){console.log('user',user);localStorage.setItem(\"access_token\",user.signInUserSession.accessToken.jwtToken);window.location.href=\"/\";}).catch(function(error){if(error.code=='UserNotConfirmedException'){window.location.href=\"/confirm\";}setErrors(error.message);});return _context.abrupt(\"return\",false);case 4:case\"end\":return _context.stop();}}},_callee);}));return function onsubmit(_x){return _ref.apply(this,arguments);};}();var email_onchange=function email_onchange(event){setEmail(event.target.value);};var password_onchange=function password_onchange(event){setPassword(event.target.value);};var el_errors;if(errors){el_errors=/*#__PURE__*/_jsx(\"div\",{className:\"errors\",children:errors});}return/*#__PURE__*/_jsxs(\"article\",{className:\"signin-article\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"signin-info\",children:/*#__PURE__*/_jsx(Logo,{className:\"logo\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"signin-wrapper\",children:[/*#__PURE__*/_jsxs(\"form\",{className:\"signin_form\",onSubmit:onsubmit,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Sign into your Cruddur account\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"fields\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"field text_field username\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:email,onChange:email_onchange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"field text_field password\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:password,onChange:password_onchange})]})]}),el_errors,/*#__PURE__*/_jsxs(\"div\",{className:\"submit\",children:[/*#__PURE__*/_jsx(Link,{to:\"/forgot\",className:\"forgot-link\",children:\"Forgot Password?\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Sign In\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"dont-have-an-account\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Don't have an account?\"}),/*#__PURE__*/_jsx(Link,{to:\"/signup\",children:\"Sign up!\"})]})]})]});}","map":{"version":3,"names":["React","ReactComponent","Logo","Link","Auth","SigninPage","useState","email","setEmail","password","setPassword","errors","setErrors","onsubmit","event","preventDefault","signIn","then","user","console","log","localStorage","setItem","signInUserSession","accessToken","jwtToken","window","location","href","catch","error","code","message","email_onchange","target","value","password_onchange","el_errors"],"sources":["/workspace/aws-bootcamp-cruddur-2023/frontend-react-js/src/pages/SigninPage.js"],"sourcesContent":["import './SigninPage.css';\nimport React from \"react\";\nimport {ReactComponent as Logo} from '../components/svg/logo.svg';\nimport { Link } from \"react-router-dom\";\n\n// [TODO] Authenication\nimport { Auth } from 'aws-amplify';\n\nexport default function SigninPage() {\n\n  const [email, setEmail] = React.useState('');\n  const [password, setPassword] = React.useState('');\n  const [errors, setErrors] = React.useState('');\n\n  const onsubmit = async (event) => {\n    setErrors('')\n    event.preventDefault();\n    Auth.signIn(email, password)\n    .then(user => {\n      console.log('user',user)\n      localStorage.setItem(\"access_token\", user.signInUserSession.accessToken.jwtToken)\n      window.location.href = \"/\"\n    })\n    .catch(error => { \n      if (error.code == 'UserNotConfirmedException') {\n        window.location.href = \"/confirm\"\n      }\n      setErrors(error.message)\n    });\n    return false\n  }\n\n  const email_onchange = (event) => {\n    setEmail(event.target.value);\n  }\n  const password_onchange = (event) => {\n    setPassword(event.target.value);\n  }\n\n  let el_errors;\n  if (errors){\n    el_errors = <div className='errors'>{errors}</div>;\n  }\n\n  return (\n    <article className=\"signin-article\">\n      <div className='signin-info'>\n        <Logo className='logo' />\n      </div>\n      <div className='signin-wrapper'>\n        <form \n          className='signin_form'\n          onSubmit={onsubmit}\n        >\n          <h2>Sign into your Cruddur account</h2>\n          <div className='fields'>\n            <div className='field text_field username'>\n              <label>Email</label>\n              <input\n                type=\"text\"\n                value={email}\n                onChange={email_onchange} \n              />\n            </div>\n            <div className='field text_field password'>\n              <label>Password</label>\n              <input\n                type=\"password\"\n                value={password}\n                onChange={password_onchange} \n              />\n            </div>\n          </div>\n          {el_errors}\n          <div className='submit'>\n            <Link to=\"/forgot\" className=\"forgot-link\">Forgot Password?</Link>\n            <button type='submit'>Sign In</button>\n          </div>\n\n        </form>\n        <div className=\"dont-have-an-account\">\n          <span>\n            Don't have an account?\n          </span>\n          <Link to=\"/signup\">Sign up!</Link>\n        </div>\n      </div>\n\n    </article>\n  );\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}